{"version":3,"sources":["services/personService.js","components/Message.js","components/Search.js","components/Person.js","components/Persons.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","axios","get","then","resp","data","newObject","post","id","put","delete","console","log","Message","props","message","msg","succ","className","Search","search","setSearch","value","onChange","e","target","Person","person","deletePerson","name","number","onClick","Persons","persons","map","p","key","PersonForm","addPerson","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","preventDefault","type","App","setPersons","setMessage","personsShown","filter","toLowerCase","includes","notify","setTimeout","useEffect","personService","initialP","newPerson","onSuccess","fail","failmsg","test","fp","find","window","confirm","catch","concat","drop","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.053c65e6.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons/'\n\nconst getAll = () => {\n\treturn axios.get(baseUrl).then(resp => resp.data)\n}\n\nconst create = (newObject) => {\n\treturn axios.post(`${baseUrl}`, newObject).then(resp => resp.data)\n}\n\nconst update = (id, newObject) => {\n\treturn axios.put(`${baseUrl}${id}`, newObject).then(resp => resp.data)\n}\n\nconst deleteR = (id) => {\n\treturn axios.delete(`${baseUrl}${id}`).then(resp => {console.log(resp); return resp.data })\n}\n\nexport default { getAll, create, update, delete: deleteR }\n","import React from 'react'\n\nconst Message = (props) => {\n\tconst { message } = props\n\tif (message === null) {\n\t\treturn null\n\t}\n\tconst { msg, succ } = message\n\treturn (\n\t\t<div className={`msg ${succ ? 'good' : 'bad'}`}>{msg}</div>\n\t)\n}\n\nexport default Message\n","import React from 'react'\n\nconst Search = (props) => {\n\tconst { search, setSearch } = props\n\n\tconst searchEdited = (e) => {\n\t\tsetSearch(e.target.value)\n\t}\n\n\treturn (\n\t\t<p>filter names with: <input value={search} onChange={searchEdited} /></p>\n\t)\n}\n\nexport default Search\n","import React from 'react'\n\nconst Person = (props) => {\n\tconst { person, deletePerson } = props\n\n\treturn (\n\t\t<p>{person.name}: {person.number} <button onClick={() => deletePerson(person)}>delete</button></p>\n\t)\n}\n\nexport default Person\n","import React from 'react'\n\nimport Person from './Person'\n\nconst Persons = (props) => {\n\tconst { persons, deletePerson } = props\n\treturn persons.map(p => <Person key={p.id} person={p} deletePerson={deletePerson} />)\n}\n\nexport default Persons\n","import React, { useState } from 'react'\n\nconst PersonForm = (props) => {\n\tconst { addPerson } = props\n\n\tconst [ newName, setNewName ] = useState('')\n\tconst [ newNumber, setNewNumber ] = useState('')\n\n\tconst nameEdited = (e) => {\n\t\tsetNewName(e.target.value)\n\t}\n\tconst numberEdited = (e) => {\n\t\tsetNewNumber(e.target.value)\n\t}\n\n\tconst personAdded = (e) => {\n\t\te.preventDefault()\n\t\tconst newPerson = {\n\t\t\tname: newName,\n\t\t\tnumber: newNumber\n\t\t}\n\t\tconst onSuccess = () => {\n\t\t\tsetNewName('')\n\t\t\tsetNewNumber('')\n\t\t}\n\t\taddPerson(newPerson, onSuccess)\n\t}\n\n\treturn (\n\t\t<form onSubmit={personAdded}>\n\t\t\t<div>\n\t\t\t\t<p>name: <input value={newName} onChange={nameEdited} /></p>\n\t\t\t\t<p>number: <input value={newNumber} onChange={numberEdited} /></p>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<button type=\"submit\">add</button>\n\t\t\t</div>\n\t\t</form>\n\t)\n}\n\nexport default PersonForm\n","import React, { useState, useEffect } from 'react'\n\nimport personService from './services/personService'\n\nimport Message from './components/Message'\nimport Search from './components/Search'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\n\nconst App = () => {\n\tconst [ persons, setPersons] = useState([])\n\n\tconst [ search, setSearch ] = useState('')\n\n\tconst [ message, setMessage ] = useState(null)\n\n\tconst personsShown = (search === '')\n\t\t? persons\n\t\t: persons.filter(p => p.name.toLowerCase().includes(search.toLowerCase()))\n\n\tconst deletePerson = (person) => {\n\t\tif (!window.confirm(`Are you sure you want to delete ${person.name}?`)) {\n\t\t\treturn\n\t\t}\n\t\tconsole.log('deleting', person)\n\n\t\tconst drop = () => setPersons(persons.filter(p => p.id !== person.id))\n\n\t\tpersonService.delete(person.id).then(resp => {\n\t\t\tconsole.log('deletion succeeded', resp)\n\t\t\tnotify(`Successfully deleted ${person.name}`, true)\n\t\t\tdrop()\n\t\t}).catch((resp) => {\n\t\t\tconsole.log('deletion failed', resp)\n\t\t\tnotify(`Failed to delete ${person.name} - no such entity`, false)\n\t\t\tdrop()\n\t\t})\n\t}\n\n\tconst notify = (msg, succ) => {\n\t\tsetMessage({msg, succ})\n\t\tsetTimeout(() => setMessage(null), 5000)\n\t}\n\n\tconst addPerson = (newPerson, onSuccess) => {\n\t\tlet fail = false\n\t\tlet failmsg = ''\n\t\tif (newPerson.name === '') {\n\t\t\tfailmsg = \"Name can't be empty!\"\n\t\t\tfail = true\n\t\t}\n\t\tif (!/^\\+?[0-9-]+$/.test(newPerson.number)) {\n\t\t\tfailmsg += \"\\nEnter a valid number!\"\n\t\t\tfail = true\n\t\t}\n\t\tif (fail) {\n\t\t\tnotify(failmsg, false)\n\t\t\treturn\n\t\t}\n\t\tconst fp = persons.find(p => p.name === newPerson.name)\n\t\tif (fp) {\n\t\t\tif (!window.confirm(`Person ${newPerson.name} already in phonebook! Replace the number with this new one?`)) {\n\t\t\t       return\n\t\t\t}\n\t\t\tpersonService.update(fp.id, {...fp, number: newPerson.number}).then((resp) => {\n\t\t\t\tconsole.log('successfully updated', resp)\n\t\t\t\tsetPersons(persons.map(p => p.id !== resp.id ? p : resp))\n\t\t\t\tnotify(`Successfully updated the entry for ${resp.name}`, true)\n\t\t\t\tonSuccess()\n\t\t\t}).catch(resp => {\n\t\t\t\tconsole.log('failed to update', resp)\n\t\t\t\tnotify(`Failed to update entry for ${fp.name} since it's already deleted`, false)\n\t\t\t\tsetPersons(persons.filter(p => p.id !== fp.id))\n\t\t\t})\n\t\t} else {\n\t\t\tpersonService.create(newPerson).then(p => {\n\t\t\t\tnotify(`Successfully added ${newPerson.name}`, true)\n\t\t\t\tsetPersons(persons.concat(p))\n\t\t\t\tonSuccess()\n\t\t\t})\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tpersonService.getAll().then((initialP) => {\n\t\t\tsetPersons(initialP)\n\t\t})\n\t}, [])\n\n\treturn (\n\t\t<div>\n\t\t\t<Message message={message} />\n\t\t\t<h2>Phonebook</h2>\n\t\t\t<Search search={search} setSearch={setSearch} />\n\t\t\t<h3>Add new</h3>\n\t\t\t<PersonForm addPerson={addPerson} />\n\t\t\t<h2>Numbers</h2>\n\t\t\t<Persons persons={personsShown} deletePerson={deletePerson} />\n\t\t</div>\n       )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}